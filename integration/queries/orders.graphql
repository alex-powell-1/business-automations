query order($id: ID!) {
    node(id: $id) {
        id
        ... on Order {
            id
            name

            channelInformation {
                id
                channelId
                channelDefinition {
                    channelName
                    handle
                    subChannelName
                }
            }

            billingAddress {
                address1
                address2
                city
                company
                country
                firstName
                lastName
                phone
                province
                zip
            }

            createdAt

            customer {
                id
                firstName
                lastName
                email
                phone
            }

            email
            discountCodes
            note
            requiresShipping

            shippingAddress {
                address1
                address2
                city
                company
                country
                firstName
                lastName
                phone
                province
                zip
            }

            shippingLine {
                discountedPriceSet {
                    shopMoney {
                        amount
                    }
                }
            }

            updatedAt

            currentSubtotalPriceSet {
                shopMoney {
                    amount
                }
            }

            currentTotalPriceSet {
                shopMoney {
                    amount
                }
            }

            displayFinancialStatus
            displayFulfillmentStatus

            subtotalLineItemsQuantity

            lineItems(first: 250) {
                edges {
                    node {
                        id
                        name

                        originalTotalSet {
                            shopMoney {
                                amount
                            }
                        }

                        originalUnitPriceSet {
                            shopMoney {
                                amount
                            }
                        }

                        totalDiscountSet {
                            shopMoney {
                                amount
                            }
                        }

                        discountedTotalSet {
                            shopMoney {
                                amount
                            }
                        }

                        quantity
                        sku

                    }
                }
            }

            billingAddressMatchesShippingAddress
            cancelReason
            cancellation {
                staffNote
            }
            cancelledAt

            cartDiscountAmountSet {
                shopMoney {
                    amount
                }
            }
            currentCartDiscountAmountSet {
                shopMoney {
                    amount
                }
            }

            closed
            closedAt

            currentTaxLines {
                rate
                ratePercentage
                title
                priceSet {
                    shopMoney {
                        amount
                    }
                }
            }

            currentTotalAdditionalFeesSet {
                shopMoney {
                    amount
                }
            }

            currentTotalDiscountsSet {
                shopMoney {
                    amount
                }
            }

            totalDiscountsSet {
                shopMoney {
                    amount
                }
            }

            returnStatus

            transactions(first: 10) {
                amountSet {
                    shopMoney {
                        amount
                    }
                }
                status
                gateway
                formattedGateway
                kind
            }

            originalTotalPriceSet {
                shopMoney {
                    amount
                }
            }

            discountCode

            discountCodes

            refunds(first: 10) {
                refundLineItems(first: 250) {
                    edges {
                        node {
                            lineItem {
                                id
                            }
                            quantity
                            subtotalSet {
                                shopMoney {
                                    amount
                                }
                            }
                        }
                    }
                }
            }

            totalRefundedSet {
                shopMoney {
                    amount
                }
            }

            totalRefundedShippingSet {
                shopMoney {
                    amount
                }
            }
        }
    }
}

query orders {
    orders(first: 20, reverse: true) {
        edges {
            node {
                id
                name
                customer {
                    firstName
                    lastName
                }
                displayFulfillmentStatus
            }
        }
    }
}

mutation OrderCustomerRemove($orderId: ID!) {
    orderCustomerRemove(orderId: $orderId) {
        order {
            id
            customer {
                id
                __typename
            }
            purchasingEntity {
                ... on Customer {
                    id
                    __typename
                }
                ... on PurchasingCompany {
                    company {
                        id
                        __typename
                    }
                    contact {
                        id
                        customer {
                            id
                            __typename
                        }
                        __typename
                    }
                    location {
                        id
                        __typename
                    }
                    __typename
                }
                __typename
            }
            __typename
        }
        userErrors {
            field
            message
            __typename
        }
        __typename
    }
}

mutation OrderAddCustomer($orderId: ID!, $customerId: ID!) {
    orderCustomerSet(orderId: $orderId, customerId: $customerId) {
        order {
            id
            customer {
                id
                fullName
                image {
                    id
                    transformedSrc: url(
                        transform: { maxWidth: 30, maxHeight: 30, crop: CENTER }
                    )
                    __typename
                }
                numberOfOrders
                note
                __typename
            }
            purchasingEntity {
                ... on Customer {
                    defaultAddress {
                        formattedArea
                        id
                        __typename
                    }
                    displayName
                    email
                    firstName
                    fullName
                    id
                    lastName
                    numberOfOrders
                    phone
                    __typename
                }
                ... on PurchasingCompany {
                    company {
                        id
                        name
                        __typename
                    }
                    contact {
                        id
                        customer {
                            displayName
                            email
                            firstName
                            fullName
                            id
                            lastName
                            numberOfOrders
                            phone
                            __typename
                        }
                        roleAssignments(first: 1) {
                            edges {
                                node {
                                    id
                                    __typename
                                }
                                __typename
                            }
                            __typename
                        }
                        __typename
                    }
                    location {
                        id
                        name
                        shippingAddress {
                            address1
                            address2
                            city
                            countryCode
                            formattedArea
                            id
                            province
                            __typename
                        }
                        __typename
                    }
                    __typename
                }
                __typename
            }
            __typename
        }
        userErrors {
            field
            message
            __typename
        }
        __typename
    }
}
